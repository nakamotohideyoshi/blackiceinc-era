<style type="text/css">
    .smart-form > tbody > tr > td {
        padding: 0px;
        border-top: none;
    }

    .lb {
        position: relative;
        display: inline-block;
        padding-right: 5px;
        width: 90px;
        text-align: right;
        padding-bottom: 5px;
    }

    .fm {
        position: relative;
        display: inline-block;
        padding-bottom: 5px;
        width: 130px;
    }

    .gridStyle {
        border: 1px solid rgb(212, 212, 212);
        width: 100%;
        height: 600px
    }

    thead > tr > th {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .wrapper.small {
        height: 550px;
        /*width: 500px;*/
        border: 1px solid #ccc;

    }

    .wrapper {
        overflow: auto;
        position: relative;
    }

    .wrapper table.table td {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .color-01, .table-striped > tbody > tr:nth-child(odd) > td.color-01, .table-striped > tbody > tr:nth-child(odd) > th.color-01 {
        background: rgb(236, 255, 240);
    }

    .color-02, .table-striped > tbody > tr:nth-child(odd) > td.color-01, .table-striped > tbody > tr:nth-child(odd) > th.color-01 {
        background: rgb(217, 249, 224);
    }

    .color-03, .table-striped > tbody > tr:nth-child(odd) > td.color-01, .table-striped > tbody > tr:nth-child(odd) > th.color-01 {
        background: rgb(217, 249, 224);
    }

    .table-header-popover {
        position: fixed;
        top: 100px;
        left: 100px;
    }

    tr th .fa.fa-question {
        float: right;
        padding-top: 5px;
        font-size: 10px;
    }

</style>
<!-- widget grid -->
<section id="widget-grid" class="">
    <div class="row">
        <div class="col-md-12" style="margin-bottom: 20px;">
            <div class="table-responsive">
                <table class="table  smart-form">
                    <tbody>
                    <tr>
                        <td>
                            <div class="lb">Snapshot Date</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.snapshot_date }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.snapshot_date"
                                            ng-change="FilterTable()"
                                            ng-options="o.snapshotDate as o.snapshotDate for o in filterOptions.snapshotDate">
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb">Load Job Nbr</div>
                            <div class="fm">
                                <label class="select" ng-class="{ 'has-success' : QueryParams.scenario }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.scenario"
                                            ng-change="FilterTable()">
                                        <option value="RC">RC</option>
                                        <option value="EC">EC</option>
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb">Scenario ID</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.asset_class }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.asset_class" ng-change="FilterTable()"
                                            ng-options="o.reportAssetClassCode as o.reportAssetClassCode for o in filterOptions.asset_class">
                                        <option value="">All</option>
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb">Industry</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.sic_code }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.sic_code"
                                            ng-change="FilterTable()"
                                            ng-options="o.sicCode as o.sicShortDesc for o in filterOptions.industry">
                                        <option value="">All</option>
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb">Geography</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.geography }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.geography"
                                            ng-change="FilterTable()"
                                            ng-options="o.id.countryCode as o.countryShortDesc for o in filterOptions.geography">
                                        <option value="">All</option>
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="lb">Asset Class</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.snapshot_date }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.snapshot_date"
                                            ng-change="FilterTable()"
                                            ng-options="o.snapshotDate as o.snapshotDate for o in filterOptions.snapshotDate">
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb">Exposure Type</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.treatment }">
                                    <select class="form-control input-sm"
                                            data-ng-model="QueryParams.treatment"
                                            data-ng-change="FilterTable()"
                                            ng-options="o.rwaTreatmentCode as o.rwaTreatmentCode for o in filterOptions.treatment">
                                    </select><i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb">Entity Type</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.exposure_type }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.exposure_type" ng-change="FilterTable()"
                                            ng-options="o.exposureTypeCode as o.exposureTypeCode for o in filterOptions.exposure_type">
                                        <option value="">All</option>
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb">Product Type</div>
                            <div class="fm">
                                <label class="select"
                                       ng-class="{ 'has-success' : QueryParams.exposure_type }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.exposure_type" ng-change="FilterTable()"
                                            ng-options="o.exposureTypeCode as o.exposureTypeCode for o in filterOptions.exposure_type">
                                        <option value="">All</option>
                                    </select> <i></i>
                                </label>
                            </div>
                        </td>
                        <td>
                            <div class="lb" style="margin-top: 5px;'">Risk Rating</div>
                            <div class="fm" style="position: absolute; margin-left: 5px;">
                                <label class="select" style="width: 54px; float: left"
                                       ng-class="{ 'has-success' : QueryParams.risk_rating_from }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.risk_rating_from"
                                            ng-change="FilterTable()"
                                            ng-options="o.range as o.range for o in filterOptions.risk_rating | filter:riskRatingUpperboundFilter(QueryParams.risk_rating_to)">
                                        <option value="">All</option>
                                    </select> <i></i>
                                </label>
                                <label class="select"
                                       style="width: 14px; float: left; margin-left: 7px; margin-top: 5px;"> - </label>
                                <label class="select" style="width: 54px; float: left"
                                       ng-class="{ 'has-success' : QueryParams.risk_rating_to }">
                                    <select class="form-control input-sm"
                                            ng-model="QueryParams.risk_rating_to"
                                            ng-change="FilterTable()"
                                            ng-options="o.range as o.range for o in filterOptions.risk_rating | filter:riskRatingLowerboundFilter(QueryParams.risk_rating_from)">
                                        <option value="">All</option>
                                    </select> <i></i>
                                </label>
                            </div>
                        </td> <!---->
                    </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row" style="margin-bottom:10px">


        <div class="col-md-6" style="margin-top: 30px">
                <button type="submit" ng-click="FilterTable()" class="btn btn-primary btn-sm"><i class="fa fa-search"></i>
                    Search
                </button>
                <a class="btn btn-default btn-sm" href="javascript:void(0);" ng-click="ResetFilter()">
                    <i class="fa fa-refresh"></i> Reset</a>
                <a href="" ng-click="saveToBookmark()" class="btn btn-default btn-sm"
                   ng-class="{'disabled' : isEmpty(QueryParams) }">
                    <i class="fa fa-save"></i> Save to Bookmark </a>
                <a href="" ng-click="OpenModal()" class="btn btn-default btn-sm">
                    <i class="glyphicon glyphicon-bookmark"></i> Open Bookmarks </a>
                <a href="javascript:void(0);" ng-click="GenerateReport()" class="btn btn-default btn-sm ">
                    <i class="fa  fa-file-pdf-o"></i> Graphs </a>
        </div>

        <div class="col-md-6" >
                <table class="table table-bordered pull-right" style="width: 375px;">
                    <thead>
                    <tr>
                        <td style="width:110px;padding: 5px 6px;font-weight: bold;">O/S Bal</td>
                        <td style="width:110px;padding: 5px 6px;font-weight: bold;">RWA Amt</td>
                        <td style="width:155px;padding: 5px 6px;font-weight: bold;">Reg Cap</td>
                    </tr>
                    </thead>

                    <tbody>
                    <tr>
                        <td class="color-01" style="width:110px;padding: 5px 6px;">{{ (TotalSum.notionalTotal |number:0)||
                            'n/a
                            '}}
                        </td>
                        <td class="color-01" style="width:110px;padding: 5px 6px;">{{ (TotalSum.rcAndEcTotal
                            |number:0)||'n/a
                            '}}
                        </td>
                        <td class="color-01" style="width:155px;padding: 5px 6px;">{{ (TotalSum.expectedLossTotal|number:0)
                            ||'
                            n/a '}}
                        </td>
                    </tr>
                    </tbody>
                </table>

        </div>

    </div>
    <div class="row">
        <div class="col-md-12 dataTables_wrapper">

            <div class="dt-toolbar no-padding">
                <div class="spinner-indicator">
                    <div class="v-loading-indicator second v-loading-indicator-delay"></div>
                </div>
            </div>
            <div class="wrapper small ">
                <table ng-float-head
                       class="table table-bordered table-striped  table-hover  sortable"
                       style="min-width: 0px; border: none; table-layout: auto;">
                    <colgroup>
                        <col style="width: 10%">
                        <!-- Snapshot Date -->
                        <col style="width: 10%">
                        <!-- Asset Class -->
                        <col style="width: 10%">
                        <!-- Exposure Type -->
                        <col style="width: 10%">
                        <!-- Customer -->
                        <col style="width: 10%">
                        <!-- Entity Type -->
                        <col style="width: 10%">
                        <!-- Product Type -->
                        <col style="width: 10%">
                        <!-- Risk Weight -->
                        <col style="width: 10%">
                        <!-- O/S Bal -->
                        <col style="width: 10%">
                        <!-- RWA Amt -->
                        <col style="width: 10%">
                        <!-- Reg Cap -->
                        <col style="width: 10%">
                        <!-- Load Job Nbr   -->
                        <col style="width: 10%">
                        <!-- Scenario ID -->
                        <col style="width: 10%">
                    </colgroup>
                    <thead>
                    <tr>
                        <!-- <th class="">ID</th> -->
                        <th class="" style="border-left: none;">Snapshot Date</th>
                        <th class="">Asset Class</th>
                        <th class="">Exposure Type</th>


                        <th class="">Customer</th>
                        <th class="">Entity Type</th>
                        <th class="">Product Type</th>
                        <th class="">Risk Weight</th>

                        <th class="color-01">O/S Bal</th>
                        <th class="color-01">RWA Amt</th>
                        <th class="color-01">Reg Cap</th>

                        <th class="">Load Job Nbr</th>
                        <th class="">Scenario ID</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="row in Wholesale.list"
                        ng-class="{ 'success' : row.$edit , 'danger' : row.newItem.$error}">

                        <td>{{ row.snapshotDate.snapshotDate }}</td>
                        <td>{{ row.rwaTreatmentCode }}</td>
                        <td>{{ row.reportAssetClassCode }}</td>
                        <td>{{ row.exposureTypeCode }}</td>


                        <td>{{ row.calculatedProbabilityOfDefault }}</td>
                        <td>{{ row.calculatedLossGivenDefaultFactor }}</td>
                        <td class="color-01">{{ row.exposureAtDefaultLcyAmt |
                            number:0 }}
                        </td>
                        <td class="color-01">
                            <div ng-if="!row.$$loading">{{ row.expectedLossLcyAmt |
                                number:0 }}
                            </div>
                            <div ng-if="row.$$loading">0</div>
                        </td>

                        <td>{{ row.effectiveMaturityInYears }}</td>
                        <td>{{ row.correlationFactor }}</td>


                        <td>{{ row.kcapitalRequirementFactor }}</td>
                        <td class="color-01">
                            <div ng-if="!row.$$loading">{{ row.riskWeightedLcyAmt |
                                number:0 }}
                            </div>
                            <div ng-if="row.$$loading">0</div>
                        </td>
                        <td>99.97</td>


                        <td>{{ row.customer.customerName }}</td>
                        <td>{{ row.facilityDelegated.facilityTypeCode }}</td>
                        <td>{{ row.instrument.instrumentTypeCode }}</td>

                        <td>{{ row.customer.sicCode.sicShortDesc }}</td>
                        <td>{{ row.customer.countryCode.countryShortDesc }}</td>
                        <td>{{ row.creditScore }}</td>
                        <td>{{ row.exposureAtDefaultLcyAmt | number:0 }}</td>

                        <td>{{ row.scenario}}</td>
                        <!-- <td> <div ng-if="!row.$edit">{{ row.directiveParagraph.directiveParagraphNum }}</div></td>
                                            <td>
                                                <div ng-if="!row.$edit">{{ row.workStream.workStreamDescription }}</div></td>

                                            <td>
                                                <div ng-if="!row.$edit"> {{ row.assetClass.assetClassName }}</div> </td>

                                            <td>
                                                <div ng-if="!row.$edit"> {{ row.riskRatingSystem.riskRatingSystemName }}</div> </td> -->
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <modal-bookmark control="focusinControl" callback="ApplyFilter(filter)"></modal-bookmark>
</section>

<script type="text/javascript">
    hieghtResize();
    pageSetUp();

    function hieghtResize() {
        // fix table height
        tableHeightSize();
        $(window).resize(function () {
            tableHeightSize()
        });
        function tableHeightSize() {
            var tableHeight = $(window).height() - 350;
            if (tableHeight < 320) {
                $('.dataTables_wrapper .wrapper').css('height', 320 + 'px');
            } else {
                $('.dataTables_wrapper .wrapper').css('height', tableHeight + 'px');
            }
        }
    }

</script> 